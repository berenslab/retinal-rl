Bootstrap: docker
From: ubuntu:22.10

%post

    export TZ=Europe/Berlin
    export DEBIAN_FRONTEND=noninteractive

    # Update
    apt -qy update

    # Python
    apt -y install python3 python3-all-dev pip

    # VizDoom Depends

    apt install -y \
        cmake \
        libboost-all-dev \
        libsdl2-dev \
        libfreetype6-dev \
        libgl1-mesa-dev \
        libglu1-mesa-dev \
        libpng-dev \
        libjpeg-dev \
        libbz2-dev \
        libfluidsynth-dev \
        libgme-dev \
        libopenal-dev \
        zlib1g-dev \
        timidity \
        git \
        tar \
        gifsicle \
        nasm

    # Plotting Depends
    apt install -y \
        ffmpeg \
        python3-pyqt5 \
        libcairo2-dev \
        fonts-liberation

    # Sample Factory
    pip3 install vizdoom==1.1.14 sample-factory==2.0.2

    # retinal-rl Extra
    pip3 install matplotlib opentsne pygame torchvision pycairo dpcpp-cpp-rt pyqt5 pyqt6

    ln -s /usr/bin/python3 /usr/bin/python
